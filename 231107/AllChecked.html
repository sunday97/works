<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Allckecked</title>
  </head>

  <!-- Local jQuery -->
  <script src="../resources/js/jquery-3.6.4.js"></script>
  <body>
    <input type="checkbox" id="chkController" />
    <label for="chkController">전체선택</label>
    <br />
    <input type="checkbox" name="sub" id="a" />
    <label for="a">a</label>
    <input type="checkbox" name="sub" id="b" />
    <label for="b">b</label>
    <input type="checkbox" name="sub" id="c" />
    <label for="c">c</label>
    <input type="checkbox" name="sub" id="d" />
    <label for="d">d</label>
    <input type="checkbox" name="sub" id="e" />
    <label for="e">e</label>
  </body>
  <script>
    // $("#chkController").on("click", function () {
    //   // 1. 전체 선택에 매핑되어있는 박스(체크박스)를 가져온다.
    //   // 2. 가져온 체크박스가 체크되어 있는지 확인을 한다.
    //   // 3. 체크-> 아래 모두 체크, 아니려먼 모두 해체
    //   // console.log($("#chkController").prop("checked"));

    //   // if ($("#chkController").prop("checked") == true) {
    //   //   $("#a").prop("checked", true);
    //   //   $("#b").prop("checked", true);
    //   //   $("#c").prop("checked", true);
    //   //   $("#d").prop("checked", true);
    //   //   $("#e").prop("checked", true);
    //   // } else {
    //   //   $("#a").prop("checked", false);
    //   //   $("#b").prop("checked", false);
    //   //   $("#c").prop("checked", false);
    //   //   $("#d").prop("checked", false);
    //   //   $("#e").prop("checked", false);
    //   // }

    //   // console.log($("[name = sub]"));
    //   const sub = $("[name = sub]");

    //   // sub.each((i, el) => {
    //   //   $("#chkController").prop("checked")
    //   //     ? $(el).prop("checked", true)
    //   //     : $(el).prop("checked", false);
    //   // });

    //   // jQuery는 반복문 처리 자동 개이득
    //   $("#chkController").prop("checked")
    //     ? sub.prop("checked", true)
    //     : sub.prop("checked", false);
    // });

    $("#chkController").on("click", function () {
      // 1. 전체선택에 매핑되어있는 input 박스(체크박스)를 가져온다.
      const allChk = $("#chkController");

      // 2. 가져온 체크박스가 체크되어 있는지 확인을 한다.
      const chk = allChk.prop("checked");

      // 3. 체크 되어있다면 아래 다섯개의 체크박스 체크, 아니라면
      //    아래 다섯개의 체크박스 체크 해제
      if (chk) {
        allChk.siblings("input").prop("checked", true);
      } else {
        allChk.siblings("input").prop("checked", false);
      }
    });

    $("#chkController")
      .siblings("input")
      .on("click", function () {
        // alert("개별선택확인");
        // console.log($("#chkController").siblings("input:checked"));
        // 1. 체크된 체크박스만 가져온다.
        const checkedBox = $("#chkController").siblings("input:checked");

        // 2. 전체체크박스를 가져온다.
        const AllCheckedBox = $("#chkController").siblings("input");

        // 3. 전체 체크박스의 갯수와 체크된 갯수를 비교해서 전체선택에 매핑되어있는 체크박스를 checked로 만든다.
        if (AllCheckedBox.length == checkedBox.length) {
          $("#chkController").prop("checked", true);
        } else {
          $("#chkController").prop("checked", false);
        }
      });
  </script>
</html>
